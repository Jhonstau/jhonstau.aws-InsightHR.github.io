<!doctype html><html lang=vi class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../../images/favicon.png type=image/png><title>Blog 3 :: Báo cáo thực tập</title>
<link href=../../../css/nucleus.css?1765299477 rel=stylesheet><link href=../../../css/fontawesome-all.min.css?1765299477 rel=stylesheet><link href=../../../css/hybrid.css?1765299477 rel=stylesheet><link href=../../../css/featherlight.min.css?1765299477 rel=stylesheet><link href=../../../css/perfect-scrollbar.min.css?1765299477 rel=stylesheet><link href=../../../css/auto-complete.css?1765299477 rel=stylesheet><link href=../../../css/atom-one-dark-reasonable.css?1765299477 rel=stylesheet><link href=../../../css/theme.css?1765299477 rel=stylesheet><link href=../../../css/hugo-theme.css?1765299477 rel=stylesheet><link href=../../../css/theme-workshop.css?1765299477 rel=stylesheet><script src=../../../js/jquery-3.3.1.min.js?1765299477></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../../vi/3-blogstranslated/3.3-blog3/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../../js/lunr.min.js?1765299477></script><script type=text/javascript src=../../../js/auto-complete.js?1765299477></script><script type=text/javascript>var baseurl="https://thienluhoan.github.io/workshop-template//vi"</script><script type=text/javascript src=../../../js/search.js?1765299477></script></div><div class=highlightable><ul class=topics><li data-nav-id=/vi/1-worklog/ title=Worklog class=dd-item><a href=../../../vi/1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/1-worklog/1.1-week1/ title="Worklog Tuần 1" class=dd-item><a href=../../../vi/1-worklog/1.1-week1/><b>1.1. </b>Worklog Tuần 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.2-week2/ title="Worklog Tuần 2" class=dd-item><a href=../../../vi/1-worklog/1.2-week2/><b>1.2. </b>Worklog Tuần 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.3-week3/ title="Worklog Tuần 3" class=dd-item><a href=../../../vi/1-worklog/1.3-week3/><b>1.3. </b>Worklog Tuần 3
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.4-week4/ title="Worklog Tuần 4" class=dd-item><a href=../../../vi/1-worklog/1.4-week4/><b>1.4. </b>Worklog Tuần 4
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.5-week5/ title="Worklog Tuần 5" class=dd-item><a href=../../../vi/1-worklog/1.5-week5/><b>1.5. </b>Worklog Tuần 5
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.6-week6/ title="Worklog Tuần 6" class=dd-item><a href=../../../vi/1-worklog/1.6-week6/><b>1.6. </b>Worklog Tuần 6
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.7-week7/ title="Worklog Tuần 7" class=dd-item><a href=../../../vi/1-worklog/1.7-week7/><b>1.7. </b>Worklog Tuần 7
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.8-week8/ title="Worklog Tuần 8" class=dd-item><a href=../../../vi/1-worklog/1.8-week8/><b>1.8. </b>Worklog Tuần 8
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.9-week9/ title="Worklog Tuần 9" class=dd-item><a href=../../../vi/1-worklog/1.9-week9/><b>1.9. </b>Worklog Tuần 9
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.10-week10/ title="Worklog Tuần 10" class=dd-item><a href=../../../vi/1-worklog/1.10-week10/><b>1.10. </b>Worklog Tuần 10
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.11-week11/ title="Worklog Tuần 11" class=dd-item><a href=../../../vi/1-worklog/1.11-week11/><b>1.11. </b>Worklog Tuần 11
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/1-worklog/1.12-week12/ title="Worklog Tuần 12" class=dd-item><a href=../../../vi/1-worklog/1.12-week12/><b>1.12. </b>Worklog Tuần 12
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/2-proposal/ title="Đề Xuất" class=dd-item><a href=../../../vi/2-proposal/><b>2. </b>Đề Xuất
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/ title="Các Blog đã Dịch" class="dd-item
parent"><a href=../../../vi/3-blogstranslated/><b>3. </b>Các Blog đã Dịch
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../../vi/3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.2-blog2/ title="Blog 2" class=dd-item><a href=../../../vi/3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/3-blogstranslated/3.3-blog3/ title="Blog 3" class="dd-item
active"><a href=../../../vi/3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/5-workshop/ title=Workshop class=dd-item><a href=../../../vi/5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/5-workshop/5.1-workshop-overview/ title="Tổng quan Workshop" class=dd-item><a href=../../../vi/5-workshop/5.1-workshop-overview/><b>5.1. </b>Tổng quan Workshop
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.2-prerequisite/ title="Yêu cầu tiên quyết" class=dd-item><a href=../../../vi/5-workshop/5.2-prerequisite/><b>5.2. </b>Yêu cầu tiên quyết
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.3-architecture/ title="Kiến trúc Dự án" class=dd-item><a href=../../../vi/5-workshop/5.3-architecture/><b>5.3. </b>Kiến trúc Dự án
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.4-setup-aws/ title="Thiết lập Môi trường AWS" class=dd-item><a href=../../../vi/5-workshop/5.4-setup-aws/><b>5.4. </b>Thiết lập Môi trường AWS
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.5-database-setup/ title="Thiết lập Database (DynamoDB)" class=dd-item><a href=../../../vi/5-workshop/5.5-database-setup/><b>5.5. </b>Thiết lập Database (DynamoDB)
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.6-authentication/ title="Dịch vụ Xác thực" class=dd-item><a href=../../../vi/5-workshop/5.6-authentication/><b>5.6. </b>Dịch vụ Xác thực
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.7-backend-services/ title="Dịch vụ Backend" class=dd-item><a href=../../../vi/5-workshop/5.7-backend-services/><b>5.7. </b>Dịch vụ Backend
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.8-frontend/ title="Phát triển Frontend" class=dd-item><a href=../../../vi/5-workshop/5.8-frontend/><b>5.8. </b>Phát triển Frontend
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.9-deployment/ title="Triển khai" class=dd-item><a href=../../../vi/5-workshop/5.9-deployment/><b>5.9. </b>Triển khai
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.10-testing/ title="Kiểm tra & Giám sát" class=dd-item><a href=../../../vi/5-workshop/5.10-testing/><b>5.10. </b>Kiểm tra & Giám sát
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/5-workshop/5.11-cleanup/ title="Dọn dẹp" class=dd-item><a href=../../../vi/5-workshop/5.11-cleanup/><b>5.11. </b>Dọn dẹp
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/vi/6-self-evaluation/ title="Tự Đánh giá" class=dd-item><a href=../../../vi/6-self-evaluation/><b>6. </b>Tự Đánh giá
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/7-feedback/ title="Chia sẻ, đóng góp ý kiến" class=dd-item><a href=../../../vi/7-feedback/><b>7. </b>Chia sẻ, đóng góp ý kiến
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/ title class=dd-item><a href=../../../vi/4-eventparticipated/><i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/vi/4-eventparticipated/4.1-event1/ title="AWS First Cloud Journey Community Day" class=dd-item><a href=../../../vi/4-eventparticipated/4.1-event1/><b>4.1. </b>AWS First Cloud Journey Community Day
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.2-event2/ title="Kick-off AWS First Cloud Journey Workforce OJT FALL 2025" class=dd-item><a href=../../../vi/4-eventparticipated/4.2-event2/><b>4.2. </b>Kick-off AWS First Cloud Journey Workforce OJT FALL 2025
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.3-event3/ title="Workshop: Data Science on AWS" class=dd-item><a href=../../../vi/4-eventparticipated/4.3-event3/><b>4.3. </b>Workshop: Data Science on AWS
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.4-event4/ title="AWS AI/ML & GenAI Workshop" class=dd-item><a href=../../../vi/4-eventparticipated/4.4-event4/><b>4.4. </b>AWS AI/ML & GenAI Workshop
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.5-event5/ title="AWS DevOps & Modern Operations" class=dd-item><a href=../../../vi/4-eventparticipated/4.5-event5/><b>4.5. </b>AWS DevOps & Modern Operations
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.6-event6/ title="AWS Security Specialty Workshop" class=dd-item><a href=../../../vi/4-eventparticipated/4.6-event6/><b>4.6. </b>AWS Security Specialty Workshop
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/vi/4-eventparticipated/4.7-event7/ title="CloudThinker: Agentic AI & Orchestration on AWS" class=dd-item><a href=../../../vi/4-eventparticipated/4.7-event7/><b>4.7. </b>CloudThinker: Agentic AI & Orchestration on AWS
<i class="fas fa-check read-icon"></i></a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://thienluhoan.github.io/workshop-template/3-blogstranslated/3.3-blog3/>English</option><option id=vi value=https://thienluhoan.github.io/workshop-template/vi/3-blogstranslated/3.3-blog3/ selected>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../../vi/>Báo cáo thực tập</a> > <a href=../../../vi/3-blogstranslated/>Các Blog đã Dịch</a> > Blog 3</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#cách-tls-inspection-hoạt-động-trước-khi-có-sni-session-holding>Cách TLS inspection hoạt động trước khi có SNI session holding</a></li><li><a href=#cách-tls-inspection-hoạt-động-khi-bật-session-holding>Cách TLS inspection hoạt động khi bật session holding</a></li><li><a href=#bắt-đầu-sử-dụng>Bắt đầu sử dụng</a></li><li><a href=#yêu-cầu>Yêu cầu</a></li><li><a href=#bật-session-holding>Bật session holding</a></li><li><a href=#giá-cả>Giá Cả</a></li><li><a href=#lưu-ý>Lưu ý</a></li><li><a href=#kết-luận>Kết luận</a></li><li><a href=#giới-thiệu-về-tác-giả>Giới thiệu về tác giả</a><ul><li><a href=#amit-gaur>Amit Gaur</a></li><li><a href=#srivalsan-mannoor-sudhagar>Srivalsan Mannoor Sudhagar</a></li><li><a href=#vikram-saurabh>Vikram Saurabh</a></li><li><a href=#olu-adeleke>Olu Adeleke</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 3</h1><h1 id=nâng-cao-khả-năng-kiểm-tra-tls-với-sni-session-holding-trong-aws-network-firewall>Nâng cao khả năng kiểm tra TLS với SNI session holding trong AWS Network Firewall</h1><p>bởi Amit Gaur, Olu Adeleke, Srivalsan Mannoor Sudhagar, và Vikram Saurabh | vào ngày 17 tháng 9 năm 2025 | tại Advanced (300), AWS Network Firewall, Security, Identity, & Compliance, Technical How-to | Permalink | Bình Luận | Chia Sẻ</p><p>AWS Network Firewall là một dịch vụ managed firewall, có nhiệm vụ lọc và kiểm soát lưu lượng mạng trong Amazon Virtual Private Cloud (Amazon VPC). Không giống như các cơ chế kiểm soát mạng truyền thống như security groups hay network access control lists (NACLs), Network Firewall có thể kiểm tra và ra quyết định dựa trên thông tin từ các tầng cao hơn của mô hình OSI, bao gồm Transport đến Application layers. Ngoài ra, bạn có thể sử dụng TLS inspection capability của Network Firewall để tạo các quy tắc firewall dựa trên nội dung của lưu lượng được mã hóa TLS. Network Firewall sẽ giải mã lưu lượng bằng chứng chỉ (certificate) bạn cấu hình và so sánh payload đã giải mã với các quy tắc trong firewall policy.</p><p>Bài viết này giới thiệu Server Name Indication (SNI) session holding, một tính năng mới giúp tăng cường khả năng kiểm tra TLS bằng cách ngăn chặn các gói TCP hoặc TLS handshake đến server đích cho đến khi các quy tắc kiểm tra TLS/SNI được áp dụng. Khi SNI session holding được bật, Network Firewall sẽ không khởi tạo kết nối TCP ra ngoài (outbound) cho đến khi nó nhận được client hello và so khớp thông tin domain trong SNI với các quy tắc firewall. Chỉ sau khi xác thực domain hợp lệ, firewall mới bắt đầu tạo kết nối TCP đến server upstream. Điều này giúp tăng cường kiểm soát bảo mật cho lưu lượng outbound mà không ảnh hưởng đáng kể đến độ trễ hoặc hiệu năng, giúp bảo vệ khỏi các kết nối độc hại.</p><h2 id=cách-tls-inspection-hoạt-động-trước-khi-có-sni-session-holding>Cách TLS inspection hoạt động trước khi có SNI session holding</h2><p>Khi bật TLS inspection, Network Firewall hoạt động như một proxy trung gian giữa client và server, duy trì hai kết nối riêng biệt với từng đầu mối. Trong suốt quá trình này, firewall sẽ đánh giá lưu lượng outbound dựa trên các quy tắc đã cấu hình để xác định xem có cho phép lưu lượng đó ra ngoài hay không. Trước khi SNI session holding ra mắt, các bước được thực hiện như minh họa trong Hình 1:</p><ol><li>Client tạo một kết nối TCP, và Network Firewall đánh giá các quy tắc stateless để xác định xem lưu lượng có được phép hay không. Nếu không, kết nối sẽ bị chấm dứt.</li><li>Network Firewall tạo một kết nối TCP đến máy chủ đích.</li><li>Client gửi một thông điệp ClientHello, bao gồm thông tin SNI, đến Network Firewall. Tường lửa xác thực rằng SNI hợp lệ, nếu không kết nối sẽ bị chấm dứt.</li><li>Network Firewall chuyển tiếp thông điệp ClientHello đến máy chủ đích.</li><li>Máy chủ đích phản hồi bằng một thông điệp ServerHello và chứng chỉ của nó.</li><li>Network Firewall xác thực các chứng chỉ được tải xuống từ máy chủ đích.</li><li>Tại thời điểm này, server name indication được xác thực so với tên chủ thể của chứng chỉ.</li><li>Network Firewall chuyển tiếp chứng chỉ của máy chủ đến client và hoàn tất kết nối TLS với client.</li><li>Client mã hóa application payload bằng các session key mà nó đã thương lượng trong quá trình bắt tay TLS và gửi nó đến Network Firewall.</li><li>Network Firewall giải mã lưu lượng, sử dụng stateful engine của nó để đánh giá các quy tắc so với lưu lượng, và xác định xem nó có được phép hay không.</li><li>Nếu lưu lượng được phép, Network Firewall mã hóa lại application layer payload bằng các session key của máy chủ đích và chuyển tiếp nó đến máy chủ đích.</li><li>Máy chủ đích gửi dữ liệu phản hồi trở lại Network Firewall.</li><li>Stateful engine của Network Firewall phân tích phản hồi của máy chủ đích.</li><li>Network Firewall chuyển tiếp phản hồi của máy chủ đến client. Quá trình giao tiếp tiếp tục cho đến khi client hoặc máy chủ đích chấm dứt kết nối.</li></ol><p><img alt=Blog src=../../../images/3-Blog/blog_3_0.png>
Hình 1: Các bước trước khi có SNI session holding</p><p>Trong quy trình trên, kết nối TCP đã được thiết lập trước khi firewall đánh giá SNI, điều này đồng nghĩa server có thể nhận biết kết nối trước khi firewall kiểm tra tính hợp lệ của domain.
Ví dụ, nếu người dùng cấu hình rule để chặn lưu lượng dựa trên TLS SNI (ví dụ example.com), họ kỳ vọng kết nối sẽ bị chặn trước khi kết nối TCP đến server được mở.
Tuy nhiên, theo chuỗi xử lý cũ, TCP connection được tạo ngắn ngủi trước khi SNI rule validation diễn ra. Điều này tạo ra một “khoảng trống nhỏ về bảo mật”, mà kẻ tấn công tinh vi có thể lợi dụng để vượt qua kiểm soát ngăn chặn rò rỉ dữ liệu (data exfiltration prevention), ngay cả khi cấu hình SNI rule đã chính xác.
Session holding giải quyết vấn đề này bằng cách đảm bảo rằng lưu lượng từ trong VPC sẽ không thể kết nối ra ngoài cho đến khi Network Firewall xác thực SNI thành công.</p><h2 id=cách-tls-inspection-hoạt-động-khi-bật-session-holding>Cách TLS inspection hoạt động khi bật session holding</h2><p>SNI session holding thực hiện quy trình xác thực hai bước. Đầu tiên, firewall kiểm tra tầng TLS và xác thực SNI khi nhận ClientHello từ client. Sau đó, chỉ khi được phê duyệt, firewall mới tạo kết nối TCP đến server đích, cho phép các giao thức tầng trên (như HTTP, SMTP) bắt đầu trao đổi. Cách tiếp cận này giúp tách biệt rõ ràng giữa quá trình xác thực TLS và kiểm tra giao thức, đảm bảo rằng chỉ lưu lượng TLS hợp lệ mới được phép khởi tạo trao đổi. Các bước minh họa trong Hình 2 như sau:
Ghi chú: Các bước 2–5 là phần của SNI session holding</p><ol><li>Client tạo một kết nối TCP, và Network Firewall đánh giá các quy tắc stateless để xác định xem lưu lượng có được phép hay không. Nếu không, kết nối sẽ bị chấm dứt.</li><li>Client gửi một thông điệp ClientHello bao gồm thông tin SNI đến Network Firewall. Network Firewall thực hiện xác thực SNI.</li><li>Tường lửa đánh giá các quy tắc kiểm tra TLS, bao gồm cả quy tắc SNI, để xác định xem lưu lượng có được phép hay không. Nếu không, kết nối sẽ bị chấm dứt.</li><li>Network Firewall tạo một kết nối TCP đến máy chủ đích.</li><li>Network Firewall chuyển tiếp thông điệp ClientHello đến máy chủ đích.</li><li>Máy chủ đích phản hồi bằng một thông điệp ServerHello và chứng chỉ của nó.</li><li>Network Firewall xác thực các chứng chỉ được tải xuống từ máy chủ đích.</li><li>Network Firewall chuyển tiếp chứng chỉ của máy chủ đến client và hoàn tất kết nối TLS với client.</li><li>Client mã hóa application payload bằng các session key mà nó đã thương lượng trong quá trình bắt tay TLS và gửi nó đến Network Firewall.</li><li>Network Firewall giải mã lưu lượng, sử dụng stateful engine của nó để đánh giá các quy tắc so với lưu lượng, và xác định xem nó có được phép hay không.</li><li>Nếu lưu lượng được phép, Network Firewall mã hóa lại application layer payload bằng các session key của máy chủ đích và chuyển tiếp nó đến máy chủ đích.</li><li>Máy chủ đích gửi dữ liệu phản hồi trở lại Network Firewall.</li><li>Stateful engine của Network Firewall phân tích phản hồi của máy chủ đích.</li><li>Network Firewall chuyển tiếp phản hồi của máy chủ đến client. Quá trình giao tiếp tiếp tục cho đến khi client hoặc máy chủ đích chấm dứt kết nối.</li></ol><p><img alt=Blog src=../../../images/3-Blog/blog_3_1.jpeg>
Hình 2: Các bước sau khi bật session holding</p><h2 id=bắt-đầu-sử-dụng>Bắt đầu sử dụng</h2><p>Bạn có thể bật session holding khi tạo cấu hình TLS inspection trong Network Firewall policy, thông qua AWS Management Console, AWS CLI, hoặc AWS SDK.</p><h2 id=yêu-cầu>Yêu cầu</h2><p>Để bắt đầu cấu hình policy có session holding, hãy truy cập AWS Network Firewall console hoặc tham khảo AWS Network Firewall Developer Guide. Session holding được hỗ trợ ở tất cả AWS Regions nơi Network Firewall khả dụng, bao gồm cả AWS GovCloud (US) và China Regions.
Nếu đây là lần đầu tiên bạn sử dụng Network Firewall, cần hoàn thành các bước chuẩn bị sau:</p><ol><li>Tạo firewall</li><li>Tạo TLS inspection configuration</li></ol><h2 id=bật-session-holding>Bật session holding</h2><p>Khi tạo firewall policy, ở bước Add TLS Inspection configuration, bạn sẽ thấy tùy chọn Enable session holding, như trong Hình 3.
<img alt=Blog src=../../../images/3-Blog/blog_3_2.png>
Hình 3: Bật session holding
Sau khi thêm cấu hình TLS inspection và chọn hộp kiểm Enable session holding, tiếp tục tạo firewall policy mới, rồi gán policy này cho firewall.
Nếu bạn đã có policy hiện có gắn với cấu hình TLS inspection, chọn Manage TLS Inspection Configuration để mở tùy chọn bật session holding.
<img alt=Blog src=../../../images/3-Blog/blog_3_3.png>
Hình 4: TLS inspection configuration
Cái này sẽ cho bạn lựa chọn để bật session holding như ở Hình 3.</p><h2 id=giá-cả>Giá Cả</h2><p>SNI session holding được bao gồm trong chi phí TLS advanced inspection. Xem chi tiết tại AWS Network Firewall pricing.</p><h2 id=lưu-ý>Lưu ý</h2><p>Khi bật session holding, cần chú ý:
Keywords: Session holding chỉ áp dụng cho các quy tắc Suricata sử dụng từ khóa TLS.SNI. Không áp dụng cho TLS.CERT hoặc TLS.VERSION.
Hiệu năng: Vì các gói TCP handshake bị giữ lại cho đến khi xác thực SNI xong, nên có thể tăng độ trễ khi có nhiều kết nối mới đồng thời.
Tương thích: Khi bật session holding, TLS.SNI sẽ ưu tiên cao hơn http.host. Khi tắt, cả hai có thể áp dụng song song. Khi bật, chỉ quy tắc chứa TLS.SNI được áp dụng trước, còn http.host chỉ hoạt động nếu traffic giải mã không khớp quy tắc SNI nào.</p><h2 id=kết-luận>Kết luận</h2><p>Như một biện pháp phòng ngừa, SNI session holding giúp đảm bảo SNI được xác thực trước khi tạo kết nối với server đích, tránh việc liên hệ ban đầu với endpoint độc hại.
Tính năng này tăng cường bảo mật cho lưu lượng outbound mà không cần thay đổi hạ tầng hiện tại. Để biết thêm thông tin, hãy xem: What is AWS Network Firewall?</p><h2 id=giới-thiệu-về-tác-giả>Giới thiệu về tác giả</h2><h3 id=amit-gaur>Amit Gaur</h3><p><img alt=Blog src=../../../images/3-Blog/blog_3_4.jpg>
Amit là Cloud Infrastructure Architect tại AWS, đam mê công nghệ và chia sẻ kiến thức trong cộng đồng networking. Anh chuyên về thiết kế kiến trúc mạng, giúp khách hàng xây dựng môi trường có khả năng mở rộng cao (highly scalable) và độ tin cậy lớn (resilient) trên AWS. Thông qua kiến thức kỹ thuật và kinh nghiệm thiết kế, Amit hỗ trợ khách hàng đẩy nhanh hành trình lên cloud đồng thời đảm bảo hệ thống được tối ưu cho scale và reliability.</p><h3 id=srivalsan-mannoor-sudhagar>Srivalsan Mannoor Sudhagar</h3><p><img alt=Blog src=../../../images/3-Blog/blog_3_5.jpg>
Srivalsan là Sr. Cloud Infrastructure Architect tại AWS Professional Services, với chuyên môn trong Cloud Infrastructure và MLOps. Anh đam mê networking và container technologies, luôn tìm cách đổi mới để giải quyết vấn đề của khách hàng. Anh thích thiết kế giải pháp và cung cấp hướng dẫn kỹ thuật giúp khách hàng và đối tác đạt được mục tiêu kỹ thuật và kinh doanh.</p><h3 id=vikram-saurabh>Vikram Saurabh</h3><p><img alt=Blog src=../../../images/3-Blog/blog_3_6.jpeg>
Vikram là engineering leader có 20 năm kinh nghiệm trong lĩnh vực software engineering, đặc biệt trong xây dựng sản phẩm và dịch vụ firewall. Hiện anh dẫn dắt đội ngũ kỹ sư của AWS Network Firewall, và trước đó từng lãnh đạo đội Route53 DNS Firewall. Ngoài công việc, Vikram yêu thích chơi cricket, leo núi (hiking) và giải đố toán học.</p><h3 id=olu-adeleke>Olu Adeleke</h3><p><img alt=Blog src=../../../images/3-Blog/blog_3_7.jpeg>
Olu là Senior Software Engineer với hơn 10 năm kinh nghiệm trong phát triển phần mềm và mạng máy tính. Anh là technical lead của nhiều dự án và tính năng trong AWS Network Firewall, đồng thời sở hữu bằng Tiến sĩ (Ph.D.) về Khoa học Máy tính. Ngoài công việc, Olu yêu thích bóng đá, vẽ phong cảnh, và dành thời gian cho gia đình và bạn bè.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../../vi/3-blogstranslated/3.2-blog2/ title="Blog 2"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../../vi/5-workshop/ title=Workshop style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../../js/clipboard.min.js?1765299477></script><script src=../../../js/perfect-scrollbar.min.js?1765299477></script><script src=../../../js/perfect-scrollbar.jquery.min.js?1765299477></script><script src=../../../js/jquery.sticky.js?1765299477></script><script src=../../../js/featherlight.min.js?1765299477></script><script src=../../../js/highlight.pack.js?1765299477></script><script>hljs.initHighlightingOnLoad()</script><script src=../../../js/modernizr.custom-3.6.0.js?1765299477></script><script src=../../../js/learn.js?1765299477></script><script src=../../../js/hugo-learn.js?1765299477></script><link href=../../../mermaid/mermaid.css?1765299477 rel=stylesheet><script src=../../../mermaid/mermaid.js?1765299477></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>